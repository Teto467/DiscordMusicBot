# DiscordMusicBot - たぶん動く音楽Bot (保証なし)

このリポジトリには、Discord で YouTube の音楽 (や、たぶん他の何か) を再生するための Bot のコードが含まれています。
一応、再生、キュー管理、スキップ、一時停止などの基本的な機能は備わっているはずです。プレイリストも…たぶん大丈夫。

**作者より:** このコードは、数多の Stack Overflow の回答と、カフェインと、そしてほんの少しの絶望から生まれました。完璧？ まさか！ でも、時々、気まぐれに音楽を再生してくれるかもしれません。

---

## !!! 警告という名の免責事項 !!!

*   **自己責任:** この Bot を使ってあなたのサーバーが炎上しても、Discord アカウントが BAN されても、飼い猫が家出しても、作者は一切の責任を負いません。使うなら覚悟を決めてください。
*   **不安定かも:** この Bot は時々、理由もなく黙り込んだり、奇妙なエラーを吐いたり、あなたの好きな曲をスキップしたりするかもしれません。それは仕様です（たぶん）。
*   **トークンは命より重い:** Discord Bot のトークンは絶対に、絶対に、絶対に公開しないでください。もし漏洩したら…まあ、頑張ってください。`.gitignore` に `.env` を追加するのを忘れずに！
*   **利用規約:** Discord と YouTube (およびその他のサービス) の利用規約はちゃんと守りましょう。この Bot を使った結果、規約違反になっても作者は知りません。

---

## 必要な生贄 (前提条件)

この怪物を召喚するには、以下の供物が必要です。

1.  **Python:** バージョン 3.8 以上推奨。古すぎると蛇 (Python) が怒ります。
2.  **FFmpeg:** 音声を処理するための魔法の杖。こいつの準備が一番の難関かもしれません。システムにインストールして、**PATH を通して**ください。これが無いと音が出ません。マジで。「FFmpeg インストール (お使いのOS名)」でググる旅に出ましょう。幸運を祈ります。
3.  **Git:** このリポジトリをあなたのマシンに召喚するための道具。

---

## 召喚の儀式 - インストール手順

さあ、儀式の始まりです。手順を間違えると、何が起こるかわかりませんよ…？

1.  **リポジトリ召喚:**
    まず、このリポジトリの呪文 (コード) をあなたのローカルマシンに降臨させます。
    ```bash
    git clone https://github.com/YOUR_USERNAME/DiscordMusicBot.git
    # YOUR_USERNAME はあなたのGitHubユーザー名に置き換えてください (Forkした場合)
    ```

2.  **祭壇へ移動:**
    召喚したリポジトリのディレクトリという名の祭壇へ移動します。
    ```bash
    cd DiscordMusicBot
    ```

3.  **聖域の結界 (仮想環境作成):**
    他の呪文との衝突を避けるため、神聖な結界 (仮想環境) を張ります。
    ```bash
    python -m venv .venv
    ```
    `.venv` という名の結界が生成されるはずです。

4.  **聖域への入場 (仮想環境アクティベート):**
    結界の中に入り、儀式の準備を整えます。
    *   **Windows (PowerShell):**
        ```powershell
        .\.venv\Scripts\Activate.ps1
        # もし実行ポリシーで怒られたら、一時的にポリシーを変更する必要があるかも…
        # Set-ExecutionPolicy RemoteSigned -Scope Process
        ```
    *   **Windows (コマンドプロンプト):**
        ```bash
        .\.venv\Scripts\activate.bat
        ```
    *   **Linux / macOS:**
        ```bash
        source .venv/bin/activate
        ```
    ターミナルの行頭に `(.venv)` が表示されたら、聖域への入場成功です。

5.  **呪文の詠唱 (依存関係インストール):**
    Bot を動かすために必要な古代の呪文 (ライブラリ) を詠唱し、インストールします。`requirements.txt` を用意しました（優しいでしょ？）。
    ```bash
    pip install -r requirements.txt
    ```
    もし `requirements.txt` が古かったり、何か問題が起きた場合は、同梱されているかもしれない `refresh_libs.py` (後述) を試すか、手動で最新版を叩き込む荒業に出るのも一興です。
    ```bash
    # 例: pip install -U py-cord[voice] yt-dlp python-dotenv
    ```

6.  **音の魔法杖 (FFmpeg の準備):**
    ステップ 5 で呪文は唱えましたが、肝心の FFmpeg (魔法の杖) は自分で用意する必要があります。「前提条件」の項をもう一度よく読んで、FFmpeg が本当に使える状態になっているか確認してください。PATH が通っていないと、Bot は「音が出せない！」と駄々をこねます。

---

## 神託の解読 - 設定

Bot を動かすには、神 (Discord) から授かった秘密の鍵 (Bot Token) が必要です。

1.  プロジェクトのルートディレクトリ ( `bot.py` がある場所) に `.env` という名前のファイルを作成します。
2.  `.env` ファイルに以下の内容を記述します。
    ```dotenv
    DISCORD_BOT_TOKEN=YOUR_VERY_SECRET_BOT_TOKEN_HERE
    ```
    `YOUR_VERY_SECRET_BOT_TOKEN_HERE` の部分を、あなたの Discord Bot の実際のトークンに置き換えてください。**このファイルは絶対に Git にコミットしないでください！** (通常 `.gitignore` に `.env` を書いておけば大丈夫なはず)

---

## 獣の目覚め - 起動

すべての儀式と準備が整いました。いよいよ、このデジタルな獣を目覚めさせるときです。

1.  仮想環境がアクティブになっていることを確認してください。 (`(.venv)` が見えますか？)
2.  以下のコマンドで Bot を起動します。
    ```bash
    python bot.py
    ```
3.  コンソールに「Bot is ready and online.」的なメッセージが表示されれば、起動成功です！おめでとうございます。これであなたのサーバーに音楽 (とカオス) をもたらす準備ができました。エラーが出たら？ …頑張ってログを読んでください。

---

## ご主人様への命令 - コマンド

この Bot はスラッシュコマンド (`/`) で操作します。Discord のチャット欄で `/` を入力すれば、使えるコマンドの候補が表示されるはずです。

*   `/play <URL or 検索>`: 曲やプレイリストを再生/キューに追加。たぶん一番使うやつ。
*   `/stop`: 再生を止め、キューを空にし、VCからBotを追い出す。別れの挨拶。
*   `/skip`: 今の曲が気に入らないときに。民主主義は存在しない。
*   `/pause`: ちょっと黙っててほしいときに。
*   `/resume`: 「やっぱり再生して」と心変わりしたときに。
*   `/queue`: 次に何が流れるか確認。絶望か、希望か。
*   `/nowplaying` (`/np`): 今流れてる曲の詳細表示。プログレスバー付き！(時間は目安)
*   `/remove <Number>`: キューから指定した番号の曲を削除。粛清。
*   `/clearqueue`: キューを空にする。大掃除。再生中の曲は無事。
*   `/leave`: VCからBotを退出させる（キューは覚えているらしい）。また来てね。
*   `/help`: この Bot の使い方を Bot 自身が教えてくれる（はず）。

---

## 代替の儀式？ (Optional: The Refresh Script)

もし `pip install -r requirements.txt` で問題が起きたり、ライブラリのバージョン地獄に陥った場合、`refresh_libs.py` という名の最終手段が用意されているかもしれません。

1.  仮想環境をアクティベートします。
2.  `python refresh_libs.py` を実行します。
3.  これは、いくつかの主要なライブラリを強制的にアンインストールし、最新版を再インストールしようと試みるスクリプトです。成功するかどうかは、あなたの環境と運次第です。

---

## 生贄歓迎 - 貢献

もしあなたがこのコードのバグを見つけたり、改善のアイデアがあったり、あるいは単に暇を持て余しているなら、プルリクエストという名の生贄は大歓迎です。ただし、それがマージされる保証はありません。作者の気まぐれです。

---

## 最終警告 (Final Disclaimer)

重ねて言いますが、この Bot の使用は完全に自己責任です。予期せぬ動作、データの損失、サーバーの混乱、世界征服の失敗など、いかなる損害についても作者は責任を負いません。ご利用は計画的に。

**健闘を祈る！**